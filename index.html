<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Autono — Policy-guarded payments for AI agents</title>
<meta name="description" content="Give your agents budgets, allow-lists, per-call caps, and receipts—across x402, L402, and smart wallets." />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<!-- Optional Lottie (if you later add hero.json) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<style>
/* ===== Base ===== */
:root { --bg:#0a0a0a; --fg:#e5e5e5; --muted:#9ca3af; --card:#111827; --border:#1f2937; --ink:#0b1f22; --accent1:#67e8f9; --accent2:#818cf8; }
*{box-sizing:border-box}
html{scroll-behavior:smooth}
body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;background:var(--bg);color:var(--fg)}
a{color:inherit;text-decoration:none}
.container{max-width:1100px;margin:0 auto;padding:0 24px}
h1,h2,h3{letter-spacing:-.02em}
.muted{color:var(--muted)}
.btn{display:inline-flex;align-items:center;gap:8px;background:#fff;color:#111;padding:10px 16px;border-radius:12px;font-weight:600;font-size:14px;transition:transform .15s ease, background .15s ease}
.btn:hover{transform:translateY(-2px)}
.btn.outline{background:transparent;color:#fff;border:1px solid rgba(255,255,255,.15)}
.chip{border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);border-radius:12px;padding:10px;font-size:12px;color:#cbd5e1}

/* ===== Nav + sticky CTA ===== */
.nav{position:sticky;top:0;backdrop-filter:blur(8px);background:rgba(10,10,10,.6);border-bottom:1px solid rgba(255,255,255,.06);z-index:40}
.nav-inner{display:flex;align-items:center;justify-content:space-between;padding:16px 0}
.logo{display:flex;align-items:center;gap:10px;font-weight:600}
.dot{width:32px;height:32px;border-radius:12px;background:linear-gradient(135deg,#6366f1,#22d3ee);display:inline-block}
.links{display:none;gap:24px;color:#cbd5e1;font-size:14px}
@media(min-width:768px){.links{display:flex}}
.sticky-cta{position:sticky;top:56px;z-index:30;margin-top:-12px}
.sticky-cta .bar{display:flex;align-items:center;justify-content:space-between;gap:12px;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.04);backdrop-filter:blur(6px);border-radius:14px;padding:10px 14px}

/* ===== Progress bar ===== */
#progress{position:fixed;left:0;top:0;height:3px;width:0;background:linear-gradient(90deg,var(--accent1),var(--accent2));z-index:9999;transform-origin:0 50%}

/* ===== Hero ===== */
.hero{position:relative;overflow:hidden;text-align:center;padding:120px 0 88px}
.blob{position:absolute;inset:0;background:radial-gradient(60% 60% at 50% 0%,rgba(99,102,241,.20),transparent);pointer-events:none}
.badge{display:inline-flex;gap:8px;align-items:center;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);padding:6px 10px;border-radius:999px;color:#cbd5e1;font-size:12px}
.badge .green{width:8px;height:8px;background:#34d399;border-radius:999px}
h1{font-size:clamp(36px,6vw,64px);line-height:1.1;margin:16px 0}
.chipgrid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:28px}
@media(min-width:768px){.chipgrid{grid-template-columns:repeat(4,1fr)}}

/* hero glow + grain */
.hero .glow-wrap{pointer-events:none;position:absolute;inset:0}
.hero .grain{
  position:absolute;inset:0;opacity:.06;
  background-image:url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2240%22 height=%2240%22 viewBox=%220 0 40 40%22><path d=%22M0 40 V0 H40%22 fill=%22none%22 stroke=%22white%22 stroke-opacity=%220.12%22/></svg>');
}
.hero .orb{
  position:absolute;left:50%;top:0;transform:translate(-50%,-20%);
  width:700px;height:700px;border-radius:50%;filter:blur(48px);
  background:radial-gradient(closest-side, rgba(56,189,248,.25), transparent 70%);
  transition:transform .25s ease; will-change:transform;
}
@media (prefers-reduced-motion: reduce){ .hero .orb{transition:none} }

/* ===== Wallet demo ===== */
.wallet-demo{display:flex;justify-content:center;gap:20px;margin-top:36px;flex-wrap:wrap}
.wallet{background:var(--card);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:16px 20px;width:200px;text-align:left;box-shadow:0 4px 20px rgba(0,0,0,.3);transition:transform .18s ease, box-shadow .18s ease}
.wallet:hover{transform:translateY(-4px);box-shadow:0 20px 50px rgba(0,0,0,.5)}
.wallet h3{margin:0 0 8px;font-size:16px}
.balance{font-size:24px;font-weight:bold;margin:4px 0}
.status{font-size:12px;padding:4px 8px;border-radius:6px;display:inline-block}
.status.ok{background:#065f46;color:#d1fae5}
.status.stop{background:#7f1d1d;color:#fee2e2}

/* ===== Logos Marquee ===== */
.marquee{border-top:1px solid rgba(255,255,255,.08);border-bottom:1px solid rgba(255,255,255,.08);padding:16px 0;background:rgba(255,255,255,.02);overflow:hidden}
.marquee .track{display:flex;gap:36px;white-space:nowrap;will-change:transform;animation:mar 28s linear infinite}
.marquee .pill{font-size:12px;color:#cbd5e1;border:1px solid rgba(255,255,255,.12);padding:8px 12px;border-radius:999px;background:rgba(255,255,255,.05)}
@keyframes mar{from{transform:translateX(0)}to{transform:translateX(-50%)}}

/* ===== USP / Value ===== */
.section{padding:90px 0}
.usp .grid{display:grid;gap:18px}
@media(min-width:900px){.usp .grid{grid-template-columns:repeat(4,1fr)}}
.card{
  border:1px solid rgba(255,255,255,.08);
  background:linear-gradient(180deg,rgba(255,255,255,.05),transparent);
  border-radius:16px;padding:24px;
  box-shadow:0 0 0 1px rgba(255,255,255,.04), 0 30px 60px -15px rgba(0,0,0,.5);
  transition:transform .18s ease, box-shadow .18s ease, background .18s ease; will-change:transform;
}
.card:hover{transform:translateY(-4px);background:rgba(255,255,255,.06);box-shadow:0 30px 60px -12px rgba(0,0,0,.6)}
.card h3{margin:10px 0 8px;font-size:18px}
.icon{font-size:18px;opacity:.9}

/* ===== Use Cases ===== */
.use .grid{display:grid;gap:18px}
@media(min-width:900px){.use .grid{grid-template-columns:repeat(3,1fr)}}
.use .card p{min-height:48px}

/* ===== Interactive Demo ===== */
.demo-wrap{display:grid;gap:24px;align-items:start}
@media(min-width:980px){.demo-wrap{grid-template-columns:1.1fr .9fr}}
.demo-card{border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.05);border-radius:16px;padding:18px}
.demo-row{display:flex;align-items:center;gap:12px;margin-top:10px}
.demo-btn{border:1px solid rgba(255,255,255,.18);background:transparent;color:#fff;border-radius:10px;padding:8px 10px;font-weight:600;cursor:pointer}
.demo-btn.active{background:#10b981;border-color:#10b981}
.demo-output{margin-top:12px;border:1px dashed rgba(255,255,255,.2);border-radius:12px;padding:12px;font-family:ui-monospace,Menlo,monospace}

/* ===== How it works (expanded) ===== */
.hiw .steps{display:grid;gap:16px}
@media(min-width:900px){.hiw .steps{grid-template-columns:repeat(3,1fr)}}
.step{border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:20px;background:linear-gradient(180deg,rgba(255,255,255,.05),transparent)}
.step .n{display:inline-block;border:1px solid rgba(255,255,255,.2);border-radius:999px;padding:4px 10px;font-size:12px;color:#cbd5e1}
.step h4{margin:12px 0 6px}

/* ===== Timeline (existing) ===== */
.timeline{padding:90px 0}
.twrap{max-width:980px;margin:0 auto;border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:18px 18px 28px;background:linear-gradient(180deg,rgba(255,255,255,.06),transparent)}
.thead{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.thead h3{margin:0;font-size:18px}
.track{position:relative;height:80px;border-radius:10px;background:rgba(255,255,255,.04);overflow:hidden}
.tick{position:absolute;top:0;bottom:0;width:1px;background:rgba(255,255,255,.06)}
.call{position:absolute;top:18px;left:-120px;display:flex;align-items:center;gap:10px;background:#fff;color:var(--ink);padding:8px 12px;border-radius:999px;border:1px solid rgba(0,0,0,.06);font-family:ui-monospace,Menlo,monospace;font-size:13px;box-shadow:0 8px 20px rgba(0,0,0,.2)}
.call .badge{border-radius:999px;border:none}
.badge.ok{background:#ecfdf5;color:#065f46}
.badge.no{background:#fef2f2;color:#7f1d1d}
@keyframes move { from{ transform:translateX(0)} to{ transform:translateX(1100px)} }
.call.go{animation:move 6s linear forwards}

/* ===== Social proof ===== */
.quote{border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.04);border-radius:16px;padding:18px}
.quote small{color:#a3b0c2}

/* ===== Footer ===== */
footer{border-top:1px solid var(--border);padding:32px 0;color:#94a3b8;font-size:14px}
.footer-inner{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.link{color:#fff;text-decoration:none}

/* ===== Reveal on scroll ===== */
.reveal{opacity:0; transform:translateY(16px); transition:opacity .5s ease, transform .5s ease}
.reveal.in{opacity:1; transform:none}

/* ===== Reduced motion ===== */
@media (prefers-reduced-motion: reduce){
  .reveal{transition:none;opacity:1;transform:none}
  .call.go{animation:none}
  .marquee .track{animation:none}
}
</style>
</head>
<body>

<!-- Progress bar -->
<div id="progress"></div>

<!-- NAV -->
<nav class="nav">
  <div class="container nav-inner">
    <div class="logo"><span class="dot"></span><span>Autono</span></div>
    <div class="links">
      <a href="#usps">Value</a>
      <a href="#usecases">Use cases</a>
      <a href="#hiw">How it works</a>
      <a href="#waitlist">Join</a>
    </div>
    <a class="btn" href="#waitlist">Get early access</a>
  </div>
</nav>

<!-- Sticky CTA -->
<div class="container sticky-cta">
  <div class="bar">
    <span class="muted" style="font-size:13px">Now inviting design partners</span>
    <a class="btn" href="#waitlist">Join waitlist</a>
  </div>
</div>

<!-- HERO -->
<header class="hero">
  <div class="blob"></div>
  <div class="glow-wrap"><div class="grain"></div><div class="orb" id="orb"></div></div>

  <div class="container">
    <div class="badge reveal"><span class="green"></span> Design partners wanted</div>
    <h1 class="reveal">Policy-guarded payments for <span style="background:linear-gradient(90deg,var(--accent2),var(--accent1));-webkit-background-clip:text;background-clip:text;color:transparent;">AI agents</span></h1>
    <p class="muted reveal" style="font-size:18px;max-width:800px;margin:12px auto 0;">
      Give your agents budgets, vendor allow-lists, per-call caps, and receipts—across x402, L402, and smart wallets.
    </p>
    <div class="reveal" style="margin-top:24px;display:flex;gap:12px;justify-content:center;flex-wrap:wrap;">
      <a class="btn" href="#waitlist">Join the waitlist</a>
      <a class="btn outline" href="#demo">Watch 90-sec demo</a>
    </div>

    <div class="chipgrid reveal">
      <div class="chip">x402 (USDC over HTTP)</div>
      <div class="chip">L402 / Lightning</div>
      <div class="chip">ERC-4337 Smart Accounts</div>
      <div class="chip">Receipts & Reconciliation</div>
    </div>

    <!-- Wallet Demo -->
    <div class="wallet-demo reveal">
      <div class="wallet">
        <h3>Agent A</h3>
        <div class="balance" id="balA">$100.00</div>
        <div class="status ok" id="statA">Active</div>
      </div>
      <div class="wallet">
        <h3>Agent B</h3>
        <div class="balance" id="balB">$45.00</div>
        <div class="status ok" id="statB">Active</div>
      </div>
      <div class="wallet">
        <h3>Agent C</h3>
        <div class="balance" id="balC">$75.00</div>
        <div class="status ok" id="statC">Active</div>
      </div>
    </div>
  </div>
</header>

<!-- LOGOS MARQUEE -->
<div class="marquee">
  <div class="container">
    <div class="track" aria-hidden="true">
      <span class="pill">Works with x402 (USDC)</span>
      <span class="pill">Lightning L402 / LSAT</span>
      <span class="pill">ERC-4337 Smart Accounts</span>
      <span class="pill">Base • Polygon</span>
      <span class="pill">Request Finance</span>
      <span class="pill">Lightspark</span>
      <!-- repeat for smooth loop -->
      <span class="pill">Works with x402 (USDC)</span>
      <span class="pill">Lightning L402 / LSAT</span>
      <span class="pill">ERC-4337 Smart Accounts</span>
      <span class="pill">Base • Polygon</span>
      <span class="pill">Request Finance</span>
      <span class="pill">Lightspark</span>
    </div>
  </div>
</div>

<!-- USP / VALUE -->
<section id="usps" class="section usp">
  <div class="container">
    <h2 class="reveal" style="font-size:32px;margin:0 0 14px">Why Autono</h2>
    <p class="muted reveal" style="max-width:720px">The control plane that turns raw rails into finance-grade automation.</p>
    <div class="grid" style="margin-top:22px">
      <div class="card reveal">
        <div class="icon">🛡️</div>
        <h3>Guardrails by default</h3>
        <p class="muted">Allow-lists, per-call caps, daily budgets, velocity limits, and time-boxed keys.</p>
      </div>
      <div class="card reveal">
        <div class="icon">🔗</div>
        <h3>Multi-rail orchestration</h3>
        <p class="muted">x402 for APIs, L402 for micro, and smart-account spend—one ruleset.</p>
      </div>
      <div class="card reveal">
        <div class="icon">🧾</div>
        <h3>Receipts & reconciliation</h3>
        <p class="muted">Attach verifiable proofs to each call; export to your ledger in one click.</p>
      </div>
      <div class="card reveal">
        <div class="icon">✅</div>
        <h3>Compliance-calm</h3>
        <p class="muted">Audit trails, Travel-Rule-ready data via partners, and promotions-friendly UX.</p>
      </div>
    </div>
  </div>
</section>

<!-- USE CASES -->
<section id="usecases" class="section use">
  <div class="container">
    <h2 class="reveal" style="font-size:32px;margin:0 0 14px">Built for real workloads</h2>
    <div class="grid" style="margin-top:22px">
      <div class="card reveal">
        <h3>AI agents</h3>
        <p class="muted">Give each agent a scoped wallet, budget, and per-call cap. Stop loops and abuse.</p>
        <div class="chip" style="display:inline-block;margin-top:8px">RAG / support bots</div>
      </div>
      <div class="card reveal">
        <h3>API vendors</h3>
        <p class="muted">Offer pay-per-request with auto-reconciliation. Disputes drop when receipts are verifiable.</p>
        <div class="chip" style="display:inline-block;margin-top:8px">Data & LLM APIs</div>
      </div>
      <div class="card reveal">
        <h3>Crypto-native teams</h3>
        <p class="muted">Route micro-spend over sats; pay vendors in USDC; export clean books to accounting.</p>
        <div class="chip" style="display:inline-block;margin-top:8px">DePIN • DAOs</div>
      </div>
    </div>
  </div>
</section>

<!-- INTERACTIVE DEMO -->
<section id="demo" class="section">
  <div class="container demo-wrap">
    <div class="demo-card reveal">
      <h3>Try the policy decision flow</h3>
      <div class="demo-row">
        <label>Vendor:</label>
        <select id="dVendor" class="demo-btn" style="padding:8px 10px">
          <option value="openai">openai</option>
          <option value="anthropic">anthropic</option>
          <option value="unknown">unknown</option>
        </select>
      </div>
      <div class="demo-row">
        <label>Amount (USDC):</label>
        <input id="dAmt" type="number" step="0.01" value="0.12" class="demo-btn" style="width:110px" />
        <button id="cap" class="demo-btn">Per-call cap: $0.10</button>
      </div>
      <div class="demo-row">
        <button id="allowBtn" class="demo-btn active">Allow-list: openai, anthropic</button>
      </div>
      <div class="demo-output" id="dOut">Click “Evaluate” to see the decision.</div>
      <div class="demo-row">
        <button id="eval" class="btn">Evaluate</button>
        <button id="resetDemo" class="btn outline">Reset</button>
      </div>
    </div>

    <div class="demo-card reveal">
      <h3>What happens</h3>
      <ol style="margin:10px 0 0;padding-left:18px;color:#cbd5e1">
        <li>Request hits Autono gateway</li>
        <li>Policies evaluate: allow-list → per-call cap → daily budget</li>
        <li>Decision: <strong>ALLOW / DENY / REVIEW</strong></li>
        <li>If ALLOW, rail executes and <strong>receipt</strong> is attached</li>
        <li>Exports flow to your accounting</li>
      </ol>
      <div id="hero-lottie" class="reveal" style="margin:22px 0 0;width:100%;height:220px"></div>
      <p class="muted" style="font-size:12px">Tip: Add a <code>hero.json</code> Lottie file later for a looping illustration.</p>
    </div>
  </div>
</section>

<!-- HOW IT WORKS (expanded) -->
<section id="hiw" class="section hiw">
  <div class="container">
    <h2 class="reveal" style="font-size:32px;margin:0 0 14px">How it works</h2>
    <div class="steps" style="margin-top:22px">
      <div class="step reveal">
        <span class="n">Step 1</span>
        <h4>Connect agents & vendors</h4>
        <p class="muted">Create agent wallets, link API vendors, and set identities.</p>
      </div>
      <div class="step reveal">
        <span class="n">Step 2</span>
        <h4>Set policies</h4>
        <p class="muted">Allow-lists, per-call caps ($/sats), daily budgets, and approvals.</p>
      </div>
      <div class="step reveal">
        <span class="n">Step 3</span>
        <h4>Go live with receipts</h4>
        <p class="muted">Gateway enforces decisions; every transaction has verifiable evidence.</p>
      </div>
    </div>
  </div>
</section>

<!-- TIMELINE (existing animation) -->
<section class="timeline" id="timeline">
  <div class="twrap reveal">
    <div class="thead">
      <h3>Agent Spend Timeline</h3>
      <div class="legend">
        <span class="badge ok">Allowed</span>
        <span class="badge no">Denied</span>
      </div>
    </div>
    <div class="track" id="track">
      <div class="tick" style="left:10%"></div>
      <div class="tick" style="left:30%"></div>
      <div class="tick" style="left:50%"></div>
      <div class="tick" style="left:70%"></div>
      <div class="tick" style="left:90%"></div>
    </div>
    <div style="display:flex;justify-content:space-between;margin-top:10px;color:#cbd5e1;font-size:12px">
      <span>Now</span><span>+30s</span><span>+60s</span>
    </div>
  </div>
</section>

<!-- SOCIAL PROOF -->
<section class="section">
  <div class="container">
    <div class="quote reveal">
      <p style="margin:0">“Shadow Mode flagged <strong>1.7% preventable spend</strong> in week one. Turning on per-call caps was a no-brainer.”</p>
      <small>— API infra lead, beta partner</small>
    </div>
  </div>
</section>

<!-- WAITLIST -->
<section id="waitlist" class="section" style="padding-top:0">
  <div class="container" style="max-width:720px">
    <div class="reveal" style="border:1px solid var(--border);background:rgba(255,255,255,.06);border-radius:16px;padding:24px">
      <h3 style="margin:0 0 6px">Get early access</h3>
      <p class="muted">Tell us where to send the invite. We’ll prioritise teams spending on APIs/compute.</p>
      <form id="wl" style="display:grid;grid-template-columns:1fr auto;gap:10px;margin-top:12px">
        <input id="email" type="email" placeholder="you@company.com" required
          style="padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.12);background:#0b0b0b;color:#fff;font-size:14px;outline:none" />
        <button class="btn" type="submit">Join</button>
      </form>
      <div id="thanks" style="display:none;margin-top:12px;border:1px solid #065f46;background:#064e3b;color:#d1fae5;padding:10px;border-radius:10px;font-size:14px">Thanks! You’re on the list.</div>
    </div>
  </div>
</section>

<!-- FINAL CTA -->
<section class="section" style="padding-top:0">
  <div class="container" style="text-align:center">
    <h2 class="reveal" style="font-size:32px;margin:0 0 10px">Ready to give your agents a budget?</h2>
    <p class="muted reveal" style="max-width:680px;margin:0 auto 18px">Start in Shadow Mode, measure prevented spend, then flip on caps for one route.</p>
    <a class="btn" href="#waitlist">Join the waitlist</a>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="container footer-inner">
    <p>© <span id="y"></span> Autono</p>
    <div style="display:flex;gap:16px">
      <a class="link" href="#">Privacy</a>
      <a class="link" href="#">Contact</a>
    </div>
  </div>
</footer>

<script>
/* ===== Reveal on scroll ===== */
const io = new IntersectionObserver((entries)=>{
  entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('in'); });
},{ threshold: 0.18 });
document.querySelectorAll('.reveal').forEach(el => io.observe(el));

/* ===== Scroll progress ===== */
const prog = document.getElementById('progress');
function updateProgress(){
  const s = window.scrollY;
  const h = document.body.scrollHeight - window.innerHeight;
  const p = h ? (s / h) : 0;
  prog.style.width = `${p*100}%`;
}
updateProgress();
window.addEventListener('scroll', updateProgress, { passive:true });

/* ===== Hero orb follows mouse ===== */
const orb = document.getElementById('orb');
if (orb){
  window.addEventListener('mousemove', (e)=>{
    const x = (e.clientX / window.innerWidth - 0.5) * 60;
    const y = (e.clientY / window.innerHeight - 0.2) * 30;
    orb.style.transform = `translate(calc(-50% + ${x}px), calc(-20% + ${y}px))`;
  }, { passive:true });
}

/* ===== Optional Lottie (needs hero.json placed next to this file) ===== */
if (window.lottie && document.getElementById('hero-lottie')){
  try{
    window.lottie.loadAnimation({
      container: document.getElementById('hero-lottie'),
      renderer: 'svg',
      loop: true,
      autoplay: true,
      path: 'hero.json'
    });
  } catch(e){}
}

/* ===== Footer year + demo waitlist submit (replace with Formspree to collect for real) ===== */
document.getElementById('y').textContent = new Date().getFullYear();
const form = document.getElementById('wl');
form.addEventListener('submit', async (e)=>{
  e.preventDefault();
  // To collect emails for real, use Formspree:
  // await fetch("https://formspree.io/f/YOUR_ID", {
  //   method:"POST", headers:{ "Content-Type":"application/json" }, body: JSON.stringify({ email: document.getElementById('email').value })
  // });
  document.getElementById('thanks').style.display='block';
  form.reset();
});

/* ===== Wallet animation (hero) ===== */
let balA=100.00, balB=45.00, balC=75.00, phase=0;
function updateBalances(){
  if(phase===0){ balA-=5; if(balA<=70) phase=1; }
  else if(phase===1){ balB+=5; if(balB>=80) phase=2; }
  else if(phase===2){ balC-=5; if(balC<=50){ const s=document.getElementById('statC'); s.textContent='Budget Cap'; s.className='status stop'; phase=3; } }
  else { balA=100; balB=45; balC=75; const s=document.getElementById('statC'); s.textContent='Active'; s.className='status ok'; phase=0; }
  document.getElementById('balA').textContent=`$${balA.toFixed(2)}`;
  document.getElementById('balB').textContent=`$${balB.toFixed(2)}`;
  document.getElementById('balC').textContent=`$${balC.toFixed(2)}`;
}
setInterval(updateBalances,800);

/* ===== Timeline of agent spend ===== */
const track = document.getElementById('track');
const CAP = 0.10; // per-call cap for demo
function spawnCall(){
  const amt = Math.round((0.05 + Math.random()*0.2) * 100)/100; // 0.05..0.25
  const allowed = amt <= CAP;

  const el = document.createElement('div');
  el.className = 'call';
  const badge = document.createElement('span');
  badge.className = 'badge ' + (allowed ? 'ok' : 'no');
  badge.textContent = allowed ? 'Allowed' : 'Denied';
  el.innerHTML = `<span>API $${amt.toFixed(2)}</span>`;
  el.appendChild(badge);

  el.style.top = allowed ? '18px' : '46px';
  track.appendChild(el);
  requestAnimationFrame(()=> el.classList.add('go'));
  if(!allowed){ setTimeout(()=> el.style.opacity='0.45', 1200); }
  setTimeout(()=> track.removeChild(el), 6500);
}
let timer = setInterval(spawnCall, 900);
if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) { clearInterval(timer); }

/* ===== Interactive demo logic ===== */
const dVendor = document.getElementById('dVendor');
const dAmt = document.getElementById('dAmt');
const dOut = document.getElementById('dOut');
const evalBtn = document.getElementById('eval');
const resetDemo = document.getElementById('resetDemo');

function evaluate(){
  const vendor = dVendor.value;
  const amount = parseFloat(dAmt.value || '0');
  const allowlist = ['openai','anthropic'];
  const perCallCap = 0.10;
  let reasons = [];
  if (!allowlist.includes(vendor)) reasons.push('Not on allow-list');
  if (amount > perCallCap) reasons.push(`Exceeds per-call cap $${perCallCap.toFixed(2)}`);
  const decision = reasons.length ? 'DENY' : 'ALLOW';
  const color = decision === 'ALLOW' ? '#10b981' : '#ef4444';
  dOut.innerHTML =
    `<div>Decision: <strong style="color:${color}">${decision}</strong></div>
     <div style="margin-top:6px">Vendor: <code>${vendor}</code> • Amount: <code>$${amount.toFixed(2)}</code></div>
     <div style="margin-top:6px">${reasons.length ? 'Reasons: ' + reasons.join('; ') : 'All checks passed.'}</div>`;
}
evalBtn.addEventListener('click', evaluate);
resetDemo.addEventListener('click', ()=>{ dVendor.value='openai'; dAmt.value='0.12'; dOut.textContent='Click “Evaluate” to see the decision.'; });
</script>

</body>
</html>
